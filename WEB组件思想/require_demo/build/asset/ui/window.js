define(["widget","jquery","jqueryUI"],function(n,t,i){function e(){this.cfg={width:500,height:300,title:"系统提示",content:"",textAlertBtn:"确定",close:!1,isDraggable:!0,skinClassName:null,handlerAlert:null,handlerClose:null,textConfirmBtn:"确定",textCancelBtn:"取消",handlerConfirm:null,handlerCancelBtn:null}}return e.prototype=t.extend({},new n.Widget,{renderUI:function(){this._mask=t('<div class="window_mask"></div>'),this._mask.appendTo("body");var n="";switch(this.cfg.winType){case"alert":n='<input type="button" class="window_alertBtn" value="'+this.cfg.textAlertBtn+'"';break;case"confirm":n='<input type="button" class="window_confirmBtn" value="'+this.cfg.textConfirmBtn+'"><input type="button" class="window_cancelBtn" value="'+this.cfg.textCancelBtn+'">'}this.boundingBox=t('<div class="window_boundingBox"><div class="window_header">'+this.cfg.title+'</div><div class="window_body">'+this.cfg.content+'</div><div class="window_footer">'+n+"</div></div>"),this.cfg.close&&this.boundingBox.append(t('<span class="window_closeBtn">X</span>')),this.boundingBox.appendTo("body")},bindUI:function(){var n=this;this.boundingBox.on("click",".window_alertBtn",function(){n.fire("alert"),n.destroy()}),this.boundingBox.on("click",".window_closeBtn",function(){n.fire("close"),n.destroy()}),this.boundingBox.on("click",".window_confirmBtn",function(){n.fire("confirm"),n.destroy()}),this.boundingBox.on("click",".window_cancelBtn",function(){n.fire("cancel"),n.destroy()}),n.cfg.handlerAlert&&n.on("alert",n.cfg.handlerAlert),n.cfg.handlerClose&&n.on("close",n.cfg.handlerClose)},syncUI:function(){this.boundingBox.css({width:this.cfg.width+"px",height:this.cfg.height+"px",left:(window.innerWidth-this.cfg.width)/2+"px",top:(window.innerHeight-this.cfg.height)/2+"px"}),this.cfg.skinClassName&&this.boundingBox.addClass(this.cfg.skinClassName),this.cfg.isDraggable&&(this.boundingBox.find(".window_header").css("cursor","move"),this.boundingBox.draggable({handle:".window_header"}))},destructor:function(){this._mask&&this._mask.remove()},alert:function(n){return t.extend(this.cfg,n,{winType:"alert"}),this.render(),this},confirm:function(n){return t.extend(this.cfg,n,{winType:"confirm"}),this.render(),this}}),{Window:e}});